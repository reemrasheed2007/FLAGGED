performance.mark("js-parse-end:notifications-global-381343b9a90bbc8b.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["36608"],{35271(t,e,o){o.d(e,{a:()=>n,n:()=>s});var i=o(21744);function s(){let t=document.getElementById("ajax-error-message");t&&(t.hidden=!1)}function n(){let t=document.getElementById("ajax-error-message");t&&(t.hidden=!0)}(0,i.on)("deprecatedAjaxError","[data-remote]",function(t){let{error:e,text:o}=t.detail;t.currentTarget!==t.target||"abort"!==e&&"canceled"!==e&&(/<html/.test(o)?(s(),t.stopImmediatePropagation()):setTimeout(function(){t.defaultPrevented||s()},0))}),(0,i.on)("deprecatedAjaxSend","[data-remote]",function(){n()}),(0,i.on)("click",".js-ajax-error-dismiss",function(){n()})},94268(t,e,o){var i=o(50467),s=o(31635),n=o(94571),a=o(35271),l=o(29517),r=o(78143);class u extends HTMLElement{async submitCustomForm(t){await this.submitForm(t),this.closeMenu()}async submitForm(t){t.preventDefault(),(0,a.a)();let e=t.currentTarget,o=new FormData(e),i=await self.fetch(e.action,{method:e.method,body:o,headers:{...(0,r.kt)(),Accept:"application/json"}});if(!i.ok)return void(0,a.n)();let s=await i.json(),n=o.get("do");"string"==typeof n&&this.updateCheckedState(n),"string"==typeof n&&this.updateMenuButtonCopy(n),this.updateSocialCount(s.count),this.applyInputsCheckedPropertiesToAttributesForNextFormReset(),this.closeMenu()}updateMenuButtonCopy(t){this.unwatchButtonCopy.hidden="subscribed"!==t&&"custom"!==t,this.stopIgnoringButtonCopy.hidden="ignore"!==t,this.watchButtonCopy.hidden="subscribed"===t||"custom"===t||"ignore"===t}applyInputsCheckedPropertiesToAttributesForNextFormReset(){for(let t of[...this.threadTypeCheckboxes])t.toggleAttribute("checked",t.checked)}updateCheckedState(t){for(let e of this.subscriptionButtons)e.setAttribute("aria-checked",e.value===t?"true":"false");if("custom"===t)this.customButton.setAttribute("aria-checked","true");else{for(let t of(this.customButton.setAttribute("aria-checked","false"),[...this.threadTypeCheckboxes]))(0,l.m$)(t,!1);if(void 0!==this.subscriptionsContainer){for(let t=0;t<this.subscriptionsLabels.length;t++)this.subscriptionsLabels[t].remove();void 0!==this.subscriptionsSubtitle&&this.subscriptionsSubtitle.toggleAttribute("hidden",!1),this.subscriptionsContainer.textContent=""}}}updateSocialCount(t){this.socialCount&&(this.socialCount.textContent=t,this.socialCount.setAttribute("aria-label",`${this.pluralizeUsers(t)} watching this repository`))}pluralizeUsers(t){return 1===parseInt(t)?"1 user is":`${t} users are`}handleDialogLabelToggle(t){let e=t.detail.wasChecked,o=t.detail.toggledLabelId,i=t.detail.templateLabelElementClone;if(e){for(let t=0;t<this.subscriptionsLabels.length;t++)if(this.subscriptionsLabels[t].getAttribute("data-label-id")===o){this.subscriptionsLabels[t].remove();break}}else i.removeAttribute("hidden"),i.setAttribute("data-targets","notifications-list-subscription-form.subscriptionsLabels"),this.subscriptionsContainer.appendChild(i)}openCustomDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!0),this.enableApplyButtonAndCheckbox(),this.saveCurrentLabelsState(),this.customDialog.toggleAttribute("hidden",!1),setTimeout(()=>{this.customDialog.querySelector("input[type=checkbox][autofocus]")?.focus()},0)}enableApplyButtonAndCheckbox(){this.customDialog.querySelectorAll('[data-type="label"]:not([hidden])').length>0&&(this.customSubmit.removeAttribute("disabled"),this.threadTypeCheckboxes[0].checked=!0)}closeCustomDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!1),this.customDialog.toggleAttribute("hidden",!0),setTimeout(()=>{this.customButton.focus()},0)}resetFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation();for(let t=0;t<this.subscriptionsLabels.length;t++){let e=this.subscriptionsLabels[t].getAttribute("data-label-id");for(let t=0;t<this.dialogLabelItems.length;t++)if(this.dialogLabelItems[t].labelId===e){this.dialogLabelItems[t].setCheckedForDropdownLabel(!1);break}}for(let t=0;t<Object.keys(this.lastAppliedLabels).length;t++){let e=Object.keys(this.lastAppliedLabels)[t];for(let t=0;t<this.dialogLabelItems.length;t++)if(this.dialogLabelItems[t].labelId===e){this.dialogLabelItems[t].setCheckedForDropdownLabel(!0);break}}this.subscriptionsContainer.replaceChildren(...Object.values(this.lastAppliedLabels)),this.closeFilterLabelsDialog(t)}openFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.saveCurrentLabelsState(),this.customDialog.toggleAttribute("hidden",!0),this.filterLabelsDialog.toggleAttribute("hidden",!1),setTimeout(()=>{this.filterLabelsDialog.querySelector("input[type=checkbox][autofocus]")?.focus()},0)}closeFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!0),this.customDialog.toggleAttribute("hidden",!1),this.filterLabelsDialog.toggleAttribute("hidden",!0)}applyFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.saveCurrentLabelsState(),this.hideFilterSubtitle(),this.enableIssuesCheckbox(),this.closeFilterLabelsDialog(t)}enableIssuesCheckbox(){let t=Object.keys(this.lastAppliedLabels).length>0;t&&this.threadTypeCheckboxes.length>0&&(this.threadTypeCheckboxes[0].checked=t),this.threadTypeCheckboxesUpdated()}hideFilterSubtitle(){let t=Object.keys(this.lastAppliedLabels).length>0;this.subscriptionsSubtitle.toggleAttribute("hidden",t)}saveCurrentLabelsState(){this.lastAppliedLabels={},this.labelInputs.textContent="";for(let t=0;t<this.subscriptionsLabels.length;t++){let e=this.subscriptionsLabels[t].getAttribute("data-label-id");e&&(this.lastAppliedLabels[e]=this.subscriptionsLabels[t].cloneNode(!0),this.appendLabelToFormInput(e))}}appendLabelToFormInput(t){let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","labels[]"),e.setAttribute("value",t),this.labelInputs.appendChild(e)}detailsToggled(){this.menu.toggleAttribute("hidden",!1),this.customDialog.toggleAttribute("hidden",!0)}submitCustom(t){t.preventDefault(),this.details.toggleAttribute("open",!1)}threadTypeCheckboxesUpdated(){let t=!this.threadTypeCheckboxes.some(t=>t.checked);this.customSubmit.disabled=t}closeMenu(){this.details.toggleAttribute("open",!1)}constructor(...t){super(...t),(0,i._)(this,"lastAppliedLabels",{})}}(0,s.Cg)([n.aC],u.prototype,"details",void 0),(0,s.Cg)([n.aC],u.prototype,"menu",void 0),(0,s.Cg)([n.aC],u.prototype,"customButton",void 0),(0,s.Cg)([n.aC],u.prototype,"customDialog",void 0),(0,s.Cg)([n.aC],u.prototype,"filterLabelsDialog",void 0),(0,s.Cg)([n.zV],u.prototype,"subscriptionButtons",void 0),(0,s.Cg)([n.zV],u.prototype,"subscriptionsLabels",void 0),(0,s.Cg)([n.aC],u.prototype,"labelInputs",void 0),(0,s.Cg)([n.aC],u.prototype,"subscriptionsSubtitle",void 0),(0,s.Cg)([n.aC],u.prototype,"socialCount",void 0),(0,s.Cg)([n.aC],u.prototype,"unwatchButtonCopy",void 0),(0,s.Cg)([n.aC],u.prototype,"stopIgnoringButtonCopy",void 0),(0,s.Cg)([n.aC],u.prototype,"watchButtonCopy",void 0),(0,s.Cg)([n.zV],u.prototype,"threadTypeCheckboxes",void 0),(0,s.Cg)([n.aC],u.prototype,"customSubmit",void 0),(0,s.Cg)([n.aC],u.prototype,"subscriptionsContainer",void 0),(0,s.Cg)([n.zV],u.prototype,"dialogLabelItems",void 0),u=(0,s.Cg)([(0,n.p_)("notifications-list-subscription-form")],u);class d extends HTMLElement{closeMenu(){this.details.toggleAttribute("open",!1)}}(0,s.Cg)([n.aC],d.prototype,"details",void 0),d=(0,s.Cg)([(0,n.p_)("notifications-team-subscription-form")],d);class p extends HTMLElement{toggleDropdownLabel(t){if(t.preventDefault(),t.stopPropagation(),this.label){let t="true"===this.label.getAttribute("aria-checked");this.setCheckedForDropdownLabel(!t),this.dispatchEvent(new CustomEvent("notifications-dialog-label-toggled",{detail:{wasChecked:t,toggledLabelId:this.labelId,templateLabelElementClone:this.hiddenLabelTemplate.cloneNode(!0)},bubbles:!0}))}}setCheckedForDropdownLabel(t){this.label.setAttribute("aria-checked",t.toString())}}(0,i._)(p,"attrPrefix",""),(0,s.Cg)([n.aC],p.prototype,"label",void 0),(0,s.Cg)([n.aC],p.prototype,"hiddenLabelTemplate",void 0),(0,s.Cg)([n.aC],p.prototype,"hiddenCheckboxInput",void 0),(0,s.Cg)([n.CF],p.prototype,"labelId",void 0),(0,s.Cg)([(0,n.p_)("notifications-dialog-label-item")],p)},57197(t,e,o){o.d(e,{O:()=>a,S:()=>n});var i=o(70730);let s=i.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",n="X-GitHub-Client-Version";function a(){return s}},78143(t,e,o){o.d(e,{jC:()=>l,kt:()=>n,tV:()=>a});var i=o(57197),s=o(51807);function n(t){let e={"X-Requested-With":"XMLHttpRequest",...(0,s.wE)(t)};return{...e,[i.S]:(0,i.O)()}}function a(t,e){for(let[o,i]of Object.entries(n(e)))t.set(o,i)}function l(t){return{"X-GitHub-App-Type":t}}},51807(t,e,o){o.d(e,{$r:()=>a,M1:()=>l,li:()=>s,pS:()=>u,wE:()=>r});var i=o(70730);let s="X-Fetch-Nonce",n=new Set;function a(t){n.add(t)}function l(){return n.values().next().value||""}function r(t){let e={};return void 0!==t&&(e["X-Fetch-Nonce-To-Validate"]=t),void 0===t?e[s]=l():n.has(t)?e[s]=t:e[s]=Array.from(n).join(","),e}function u(){let t=i.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";t&&a(t)}},29517(t,e,o){o.d(e,{Cy:()=>l,K3:()=>d,Z8:()=>r,k_:()=>n,lK:()=>p,m$:()=>a});var i=o(13254);function s(t,e,o){return t.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:o}))}function n(t,e){e&&(function(t,e){if(!(t instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(e instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==e.type)throw TypeError("The specified element is not a submit button.");if(!t||t!==e.form)throw Error("The specified element is not owned by the form element.")}(t,e),(0,i.A)(e)),s(t,"submit",!0)&&t.submit()}function a(t,e){if("boolean"==typeof e)if(t instanceof HTMLInputElement)t.checked=e;else throw TypeError("only checkboxes can be set to boolean value");else if("checkbox"===t.type)throw TypeError("checkbox can't be set to string value");else t.value=e;s(t,"change",!1)}function l(t,e){for(let o in e){let i=e[o],s=t.elements.namedItem(o);s instanceof HTMLInputElement?s.value=i:s instanceof HTMLTextAreaElement&&(s.value=i)}}function r(t){if(!(t instanceof HTMLElement))return!1;let e=t.nodeName.toLowerCase(),o=(t.getAttribute("type")||"").toLowerCase();return"select"===e||"textarea"===e||"input"===e&&"submit"!==o&&"reset"!==o||t.isContentEditable}function u(t){return new URLSearchParams(t)}function d(t,e){let o=new URLSearchParams(t.search);for(let[t,i]of u(e))o.append(t,i);return o.toString()}function p(t){return u(new FormData(t)).toString()}},13254(t,e,o){function i(t){let e=t.closest("form");if(!(e instanceof HTMLFormElement))return;let o=s(e);if(t.name){let i=t.matches("input[type=submit]")?"Submit":"",s=t.value||i;o||((o=document.createElement("input")).type="hidden",o.classList.add("js-submit-button-value"),e.prepend(o)),o.name=t.name,o.value=s}else o&&o.remove()}function s(t){let e=t.querySelector("input.js-submit-button-value");return e instanceof HTMLInputElement?e:null}o.d(e,{A:()=>i,C:()=>s})},70730(t,e,o){o.d(e,{Kn:()=>a,XC:()=>s,cg:()=>n,fV:()=>l});let i="u">typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,s="u"<typeof document||i?void 0:document,n="u"<typeof window||i?void 0:window,a="u"<typeof history||i?void 0:history,l="u"<typeof location||i?{get pathname(){return(void 0)??""},get origin(){return(void 0)??""},get search(){return(void 0)??""},get hash(){return(void 0)??""},get href(){return(void 0)??""}}:location}},function(t){t.O(0,["20475"],function(){return t(t.s=94268)}),t.O()}]);
//# sourceMappingURL=notifications-global-381343b9a90bbc8b-8fa3383840e0f29c.js.map