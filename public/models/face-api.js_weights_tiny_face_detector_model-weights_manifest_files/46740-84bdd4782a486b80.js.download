performance.mark("js-parse-end:46740-84bdd4782a486b80.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["46740"],{524(e,t,n){n.r(t),n.d(t,{default:()=>O});var i,l,s=function(e,t,n,i){if("a"===n&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};let o=["[data-md-button]","md-header","md-bold","md-italic","md-quote","md-code","md-link","md-image","md-unordered-list","md-ordered-list","md-task-list","md-mention","md-ref","md-strikethrough"];function r(e){let t=[];for(let n of e.querySelectorAll(o.join(", ")))n.hidden||n.offsetWidth<=0&&n.offsetHeight<=0||n.closest("markdown-toolbar")===e&&t.push(n);return t}function d(e){return function(t){(" "===t.key||"Enter"===t.key)&&e(t)}}let c=new WeakMap,a={"header-1":{prefix:"# "},"header-2":{prefix:"## "},"header-3":{prefix:"### "},"header-4":{prefix:"#### "},"header-5":{prefix:"##### "},"header-6":{prefix:"###### "},bold:{prefix:"**",suffix:"**",trimFirst:!0},italic:{prefix:"_",suffix:"_",trimFirst:!0},quote:{prefix:"> ",multiline:!0,surroundWithNewlines:!0},code:{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"},link:{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"},image:{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"},"unordered-list":{prefix:"- ",multiline:!0,unorderedList:!0},"ordered-list":{prefix:"1. ",multiline:!0,orderedList:!0},"task-list":{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0},mention:{prefix:"@",prefixSpace:!0},ref:{prefix:"#",prefixSpace:!0},strikethrough:{prefix:"~~",suffix:"~~",trimFirst:!0}};class u extends HTMLElement{constructor(){super();const e=e=>{let t=c.get(this);t&&(e.preventDefault(),H(this,t))};this.addEventListener("keydown",d(e)),this.addEventListener("click",e)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","button")}click(){let e=c.get(this);e&&H(this,e)}}class m extends u{constructor(){super(...arguments),i.add(this)}connectedCallback(){let e=parseInt(this.getAttribute("level")||"3",10);s(this,i,"m",l).call(this,e)}static get observedAttributes(){return["level"]}attributeChangedCallback(e,t,n){if("level"!==e)return;let o=parseInt(n||"3",10);s(this,i,"m",l).call(this,o)}}i=new WeakSet,l=function(e){if(e<1||e>6)return;let t=`${"#".repeat(e)} `;c.set(this,{prefix:t})},window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=m,window.customElements.define("md-header",m));class f extends u{connectedCallback(){c.set(this,{prefix:"**",suffix:"**",trimFirst:!0})}}window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=f,window.customElements.define("md-bold",f));class h extends u{connectedCallback(){c.set(this,{prefix:"_",suffix:"_",trimFirst:!0})}}window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=h,window.customElements.define("md-italic",h));class w extends u{connectedCallback(){c.set(this,{prefix:"> ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=w,window.customElements.define("md-quote",w));class x extends u{connectedCallback(){c.set(this,{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"})}}window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=x,window.customElements.define("md-code",x));class g extends u{connectedCallback(){c.set(this,{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=g,window.customElements.define("md-link",g));class E extends u{connectedCallback(){c.set(this,{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-image")||(window.MarkdownImageButtonElement=E,window.customElements.define("md-image",E));class p extends u{connectedCallback(){c.set(this,{prefix:"- ",multiline:!0,unorderedList:!0})}}window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=p,window.customElements.define("md-unordered-list",p));class b extends u{connectedCallback(){c.set(this,{prefix:"1. ",multiline:!0,orderedList:!0})}}window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=b,window.customElements.define("md-ordered-list",b));class k extends u{connectedCallback(){c.set(this,{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=k,window.customElements.define("md-task-list",k));class v extends u{connectedCallback(){c.set(this,{prefix:"@",prefixSpace:!0})}}window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=v,window.customElements.define("md-mention",v));class S extends u{connectedCallback(){c.set(this,{prefix:"#",prefixSpace:!0})}}window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=S,window.customElements.define("md-ref",S));class L extends u{connectedCallback(){c.set(this,{prefix:"~~",suffix:"~~",trimFirst:!0})}}function C(e){let{target:t,currentTarget:n}=e;if(!(t instanceof Element))return;let i=t.closest("[data-md-button]");if(!i||i.closest("markdown-toolbar")!==n)return;let l=a[i.getAttribute("data-md-button")];l&&(e.preventDefault(),H(t,l))}function M(e){e.addEventListener("keydown",T),e.setAttribute("tabindex","0"),e.addEventListener("focus",B,{once:!0})}function A(e){e.removeEventListener("keydown",T),e.removeAttribute("tabindex"),e.removeEventListener("focus",B)}window.customElements.get("md-strikethrough")||(window.MarkdownStrikethroughButtonElement=L,window.customElements.define("md-strikethrough",L));class y extends HTMLElement{connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.hasAttribute("data-no-focus")||M(this),this.addEventListener("keydown",d(C)),this.addEventListener("click",C)}attributeChangedCallback(e,t,n){"data-no-focus"===e&&(null===n?M(this):A(this))}disconnectedCallback(){A(this)}get field(){let e,t=this.getAttribute("for");if(!t)return null;let n="getRootNode"in this?this.getRootNode():document;return(n instanceof Document||n instanceof ShadowRoot)&&(e=n.getElementById(t)),e instanceof HTMLTextAreaElement?e:null}}function B({target:e}){if(!(e instanceof Element))return;e.removeAttribute("tabindex");let t="0";for(let n of r(e))n.setAttribute("tabindex",t),"0"===t&&(n.focus(),t="-1")}function T(e){let t=e.key;if("ArrowRight"!==t&&"ArrowLeft"!==t&&"Home"!==t&&"End"!==t)return;let n=e.currentTarget;if(!(n instanceof HTMLElement))return;let i=r(n),l=i.indexOf(e.target),s=i.length;if(-1===l)return;let o=0;"ArrowLeft"===t&&(o=l-1),"ArrowRight"===t&&(o=l+1),"End"===t&&(o=s-1),o<0&&(o=s-1),o>s-1&&(o=0);for(let e=0;e<s;e+=1)i[e].setAttribute("tabindex",e===o?"0":"-1");e.preventDefault(),i[o].focus()}function W(e){return e.trim().split("\n").length>1}function F(e,t){return Array(t+1).join(e)}y.observedAttributes=["data-no-focus"],window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=y,window.customElements.define("markdown-toolbar",y));let N=null;function _(e){let t,n,i=e.value.slice(0,e.selectionStart),l=e.value.slice(e.selectionEnd),s=i.match(/\n*$/),o=l.match(/^\n*/),r=s?s[0].length:0,d=o?o[0].length:0;return i.match(/\S/)&&r<2&&(t=F("\n",2-r)),l.match(/\S/)&&d<2&&(n=F("\n",2-d)),null==t&&(t=""),null==n&&(n=""),{newlinesToAppend:t,newlinesToPrepend:n}}function j(e){let t=e.split("\n"),n=/^\d+\.\s+/,i=t.every(e=>n.test(e)),l=t;return i&&(l=t.map(e=>e.replace(n,""))),{text:l.join("\n"),processed:i}}function $(e){let t=e.split("\n"),n=t.every(e=>e.startsWith("- ")),i=t;return n&&(i=t.map(e=>e.slice(2,e.length))),{text:i.join("\n"),processed:n}}function R(e,t){return t?"- ":`${e+1}. `}function H(e,t){let n=e.closest("markdown-toolbar");if(!(n instanceof y))return;let i=Object.assign(Object.assign({},{prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,unorderedList:!1,trimFirst:!1}),t),l=n.field;if(l){let e,t;l.focus(),t=l.value.slice(l.selectionStart,l.selectionEnd),e=i.orderedList||i.unorderedList?function(e,t){let n,i,l,s=e.selectionStart===e.selectionEnd,o=e.selectionStart,r=e.selectionEnd,d=e.value.split("\n"),c=0;for(let t=0;t<d.length;t++){let n=d[t].length+1;e.selectionStart>=c&&e.selectionStart<c+n&&(e.selectionStart=c),e.selectionEnd>=c&&e.selectionEnd<c+n&&(e.selectionEnd=c+n-1),c+=n}let a=e.value.slice(e.selectionStart,e.selectionEnd),[u,m,f]=(l=t.orderedList?(n=$((i=j(a)).text)).text:(n=j((i=$(a)).text)).text,[i,n,l]),h=f.split("\n").map((e,n)=>`${R(n,t.unorderedList)}${e}`),w=h.reduce((e,n,i)=>e+R(i,t.unorderedList).length,0),x=h.reduce((e,n,i)=>e+R(i,!t.unorderedList).length,0);if(u.processed)return s?r=o=Math.max(o-R(0,t.unorderedList).length,0):(o=e.selectionStart,r=e.selectionEnd-w),{text:f,selectionStart:o,selectionEnd:r};let{newlinesToAppend:g,newlinesToPrepend:E}=_(e),p=g+h.join("\n")+E;return s?r=o=Math.max(o+R(0,t.unorderedList).length+g.length,0):m.processed?(o=Math.max(e.selectionStart+g.length,0),r=e.selectionEnd+g.length+w-x):(o=Math.max(e.selectionStart+g.length,0),r=e.selectionEnd+g.length+w),{text:p,selectionStart:o,selectionEnd:r}}(l,i):i.multiline&&W(t)?function(e,t){let{prefix:n,suffix:i,surroundWithNewlines:l}=t,s=e.value.slice(e.selectionStart,e.selectionEnd),o=e.selectionStart,r=e.selectionEnd,d=s.split("\n");if(d.every(e=>e.startsWith(n)&&e.endsWith(i)))r=o+(s=d.map(e=>e.slice(n.length,e.length-i.length)).join("\n")).length;else if(s=d.map(e=>n+e+i).join("\n"),l){let{newlinesToAppend:t,newlinesToPrepend:n}=_(e);o+=t.length,r=o+s.length,s=t+s+n}return{text:s,selectionStart:o,selectionEnd:r}}(l,i):function(e,t){let n,i,{prefix:l,suffix:s,blockPrefix:o,blockSuffix:r,replaceNext:d,prefixSpace:c,scanFor:a,surroundWithNewlines:u}=t,m=e.selectionStart,f=e.selectionEnd,h=e.value.slice(e.selectionStart,e.selectionEnd),w=W(h)&&o.length>0?`${o}
`:l,x=W(h)&&r.length>0?`
${r}`:s;if(c){let t=e.value[e.selectionStart-1];0===e.selectionStart||null==t||t.match(/\s/)||(w=` ${w}`)}h=function(e,t,n,i=!1){if(e.selectionStart===e.selectionEnd)e.selectionStart=function(e,t){let n=t;for(;e[n]&&null!=e[n-1]&&!e[n-1].match(/\s/);)n--;return n}(e.value,e.selectionStart),e.selectionEnd=function(e,t,n){let i=t,l=n?/\n/:/\s/;for(;e[i]&&!e[i].match(l);)i++;return i}(e.value,e.selectionEnd,i);else{let i=e.selectionStart-t.length,l=e.selectionEnd+n.length,s=e.value.slice(i,e.selectionStart)===t,o=e.value.slice(e.selectionEnd,l)===n;s&&o&&(e.selectionStart=i,e.selectionEnd=l)}return e.value.slice(e.selectionStart,e.selectionEnd)}(e,w,x,t.multiline);let g=e.selectionStart,E=e.selectionEnd,p=d.length>0&&x.indexOf(d)>-1&&h.length>0;if(u){let t=_(e);n=t.newlinesToAppend,i=t.newlinesToPrepend,w=n+l,x+=i}if(h.startsWith(w)&&h.endsWith(x)){let e=h.slice(w.length,h.length-x.length);if(m===f){let t=m-w.length;g=E=t=Math.min(t=Math.max(t,g),g+e.length)}else E=g+e.length;return{text:e,selectionStart:g,selectionEnd:E}}if(p)if(a.length>0&&h.match(a))return{text:w+(x=x.replace(d,h)),selectionStart:g=E=g+w.length,selectionEnd:E};else{let e=w+h+x;return E=(g=g+w.length+h.length+x.indexOf(d))+d.length,{text:e,selectionStart:g,selectionEnd:E}}{let e=w+h+x;g=m+w.length,E=f+w.length;let n=h.match(/^\s*|\s*$/g);if(t.trimFirst&&n){let t=n[0]||"",i=n[1]||"";e=t+w+h.trim()+x+i,g+=t.length,E-=i.length}return{text:e,selectionStart:g,selectionEnd:E}}}(l,i),function(e,{text:t,selectionStart:n,selectionEnd:i}){let l=e.selectionStart,s=e.value.slice(0,l),o=e.value.slice(e.selectionEnd);if(null===N||!0===N){e.contentEditable="true";try{N=document.execCommand("insertText",!1,t)}catch(e){N=!1}e.contentEditable="false"}if(N&&!e.value.slice(0,e.selectionStart).endsWith(t)&&(N=!1),!N){try{document.execCommand("ms-beginUndoUnit")}catch(e){}e.value=s+t+o;try{document.execCommand("ms-endUndoUnit")}catch(e){}e.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=n&&null!=i?e.setSelectionRange(n,i):e.setSelectionRange(l,e.selectionEnd)}(l,e)}}let O=y}}]);
//# sourceMappingURL=46740-84bdd4782a486b80-fb20cd19fbf63c64.js.map