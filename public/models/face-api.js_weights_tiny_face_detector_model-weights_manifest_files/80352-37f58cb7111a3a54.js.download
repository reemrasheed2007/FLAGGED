performance.mark("js-parse-end:80352-37f58cb7111a3a54.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["80352"],{45767(e,t,n){n.d(t,{_S:()=>l,cB:()=>o,cW:()=>i});var a=n(84471),r=n(70730);let l=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},41991(e,t,n){n.d(t,{Z:()=>a});function a({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},50786(e,t,n){n.d(t,{_:()=>r});var a=n(74848);function r({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:r,onlyAddHotkeyScopeButton:l}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{hidden:!0,"data-testid":r||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!l&&(0,a.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}r.displayName="DuplicateOnKeydownButton"},71716(e,t,n){n.d(t,{Ak:()=>f,RF:()=>h,Wl:()=>m,aT:()=>g,cD:()=>p,fN:()=>u});var a=n(74848),r=n(43300),l=n(13564),i=n(69991),o=n(33304),s=n(96540),c=n(88005);let d=(0,i.A)("localStorage"),u=(0,s.createContext)(void 0);u.displayName="OpenPanelStateContext";let m=(0,s.createContext)(()=>void 0);function p({children:e,payload:t,openPanelRef:n,action:i}){let p=(0,c.E)(),f="blame"in t,h=(0,r.H)(t),g=p?"blame"===i:f,y=p?"tree"===i:h,x=(0,s.useRef)(g),_=(0,s.useRef)(y);(0,s.useLayoutEffect)(()=>{x.current=g,_.current=y});let w=(0,l.i)(),v=(0,s.useRef)(void 0),[F,R]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!w&&""!==e&&null!==e||w&&t.symbolsExpanded)return"codeNav"}),b=(g||y)&&"codeNav"===F?void 0:F;s.useEffect(()=>{n.current=b},[b,n]);let T=(0,s.useCallback)((e,t)=>{R(n=>(n&&v.current&&v.current.focus(),v.current=t,x.current||_.current&&"codeNav"===e?void 0:e))},[]);return function(e){let{screenSize:t}=(0,o.lm)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let a=n.current>=o.Gy.large,r=n.current===t;t<o.Gy.large&&(a||r)&&e(void 0),n.current=t},[t,e])}(T),(0,a.jsx)(u,{value:b,children:(0,a.jsx)(m,{value:T,children:e})})}function f(){return{openPanel:(0,s.use)(u),setOpenPanel:(0,s.use)(m)}}function h(){return(0,s.use)(u)}function g(){return(0,s.use)(m)}m.displayName="OpenPanelDispatchContext",(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0}).displayName="OpenPanelContext",p.displayName="OpenPanelProvider"},31631(e,t,n){function a(e){return r(e)[0]}function r(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,r]=n.trim().split("=");e===a&&void 0!==r&&t.push({key:a,value:r})}return t}function l(e,t,n=null,a=!1,r="lax"){let i=document.domain;if(null==i)throw Error("Unable to get document domain");i.endsWith(".github.com")&&(i="github.com");let o="https:"===location.protocol?"; secure":"",s=n?`; expires=${n}`:"";!1===a&&(i=`.${i}`);try{document.cookie=`${e}=${t}; path=/; domain=${i}${s}${o}; samesite=${r}`}catch{}}function i(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",l=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${l}${r}`}catch{}}n.d(t,{OR:()=>r,Ri:()=>a,TV:()=>l,Yj:()=>i})},30490(e,t,n){n.d(t,{L:()=>s});var a=n(74848),r=n(16522),l=n(38621),i=n(26108),o=n(34164);n(96540);let s=e=>{let t,n,s,c=(0,r.c)(17),{ref:d,expanded:u,testid:m,ariaLabel:p,ariaControls:f,onToggleExpanded:h,alignment:g,dataHotkey:y,className:x,size:_,tooltipDirection:w,variant:v}=e,F=u?`collapse-${m}`:`expand-${m}`,R=u?"left"===g?l.SidebarExpandIcon:l.SidebarCollapseIcon:"left"===g?l.SidebarCollapseIcon:l.SidebarExpandIcon;c[0]!==h?(t=e=>{h(e)},c[0]=h,c[1]=t):t=c[1];let b=v??"invisible";return c[2]!==x?(n=(0,o.$)(x,"fgColor-muted"),c[2]=x,c[3]=n):n=c[3],c[4]!==f||c[5]!==p||c[6]!==y||c[7]!==u||c[8]!==d||c[9]!==_||c[10]!==F||c[11]!==R||c[12]!==t||c[13]!==b||c[14]!==n||c[15]!==w?(s=(0,a.jsx)(i.K,{"aria-label":p,tooltipDirection:w,ref:d,"data-testid":F,"aria-expanded":u,"aria-controls":f,icon:R,"data-hotkey":y,onClick:t,variant:b,size:_,className:n}),c[4]=f,c[5]=p,c[6]=y,c[7]=u,c[8]=d,c[9]=_,c[10]=F,c[11]=R,c[12]=t,c[13]=b,c[14]=n,c[15]=w,c[16]=s):s=c[16],s};s.displayName="ExpandButton",s.displayName="ExpandButton"},63648(e,t,n){n.d(t,{f:()=>r});var a=n(58388);async function r(e){let t=await (0,a.lS)(`${e}?noancestors=1`);if(!t.ok)throw Error(`Failed to fetch tree data: ${t.status} ${t.statusText}`);let n=await t.json();return"codeViewTreeRoute"in n.payload?{tree:{items:n.payload.codeViewTreeRoute.tree.items,totalCount:n.payload.codeViewTreeRoute.tree.totalCount}}:{tree:{items:n.payload.tree.items,totalCount:n.payload.tree.totalCount}}}},84190(e,t,n){n.d(t,{Uy:()=>Z,H:()=>h,qn:()=>e_,c2:()=>eu,Nq:()=>M});var a=n(74848),r=n(16522),l=n(50786),i=n(47032),o=n(30490),s=n(99589),c=n(38621),d=n(21373),u=n(34164),m=n(96540);let p=e=>{let t,n,m,p,f,h,g=(0,r.c)(32),{ref:y,expanded:x,onToggleExpanded:_,className:w,ariaControls:v,textAreaId:F,useFilesButtonBreakpoint:R,variant:b,getTooltipDirection:T}=e,C=void 0===R||R,{toggleTreeShortcut:I}=(0,i.wk)(),{isServer:j}=(0,s.V)();g[0]!==x||g[1]!==T?(t=T?.(x)??"se",g[0]=x,g[1]=T,g[2]=t):t=g[2];let k=t;g[3]!==x||g[4]!==j||g[5]!==_||g[6]!==y||g[7]!==I.hotkey||g[8]!==C||g[9]!==b?(n=C&&(!x||j)&&(0,a.jsx)(d.Q,{"aria-label":"Expand file tree",leadingVisual:c.ArrowLeftIcon,"data-hotkey":I.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:y,onClick:_,variant:b??"invisible",className:"ExpandFileTreeButton-module__Button_1__Svs95",children:"Files"}),g[3]=x,g[4]=j,g[5]=_,g[6]=y,g[7]=I.hotkey,g[8]=C,g[9]=b,g[10]=n):n=g[10];let N=I.hotkey,S=C&&(!x||j);g[11]!==w||g[12]!==S?(m=(0,u.$)(w,"position-relative","ExpandFileTreeButton-module__expandButton__hDOcv",{"ExpandFileTreeButton-module__filesButtonBreakpoint__zEvz3":S}),g[11]=w,g[12]=S,g[13]=m):m=g[13];let E=x?"Collapse file tree":"Expand file tree";return g[14]!==v||g[15]!==x||g[16]!==_||g[17]!==y||g[18]!==m||g[19]!==E||g[20]!==I.hotkey||g[21]!==k||g[22]!==b?(p=(0,a.jsx)(o.L,{dataHotkey:N,className:m,expanded:x,alignment:"left",ariaLabel:E,tooltipDirection:k,testid:"file-tree-button",ariaControls:v,ref:y,variant:b,onToggleExpanded:_}),g[14]=v,g[15]=x,g[16]=_,g[17]=y,g[18]=m,g[19]=E,g[20]=I.hotkey,g[21]=k,g[22]=b,g[23]=p):p=g[23],g[24]!==_||g[25]!==F||g[26]!==I.hotkey?(f=(0,a.jsx)(l._,{buttonFocusId:F,buttonHotkey:I.hotkey,onButtonClick:_,onlyAddHotkeyScopeButton:!0}),g[24]=_,g[25]=F,g[26]=I.hotkey,g[27]=f):f=g[27],g[28]!==n||g[29]!==p||g[30]!==f?(h=(0,a.jsxs)(a.Fragment,{children:[n,p,f]}),g[28]=n,g[29]=p,g[30]=f,g[31]=h):h=g[31],h};p.displayName="ExpandFileTreeButton",p.displayName="ExpandFileTreeButton";var f=n(90797);function h(e){let t,n,o=(0,r.c)(8),{inputRef:s,onFindFilesShortcut:c,textAreaId:d}=e,{sendRepoKeyDownEvent:u}=(0,f.T)(),{findFilesShortcut:m}=(0,i.wk)();return o[0]!==s||o[1]!==c||o[2]!==u?(t=()=>{c?.(),s?.current?.focus(),u("GO_TO_FILE")},o[0]=s,o[1]=c,o[2]=u,o[3]=t):t=o[3],o[4]!==m.hotkey||o[5]!==t||o[6]!==d?(n=(0,a.jsx)(l._,{buttonFocusId:d,buttonHotkey:m.hotkey,onButtonClick:t}),o[4]=m.hotkey,o[5]=t,o[6]=d,o[7]=n):n=o[7],n}h.displayName="FindFilesShortcut";var g=n(87077),y=n(52409),x=n(36570),_=n(712),w=n(71716),v=n(38489),F=n(8836),R=n(94583),b=n(35148),T=n(32222),C=n(33304),I=n(84048),j=n(29941),k=n(47819),N=n(26108),S=n(87555),E=n(45721),P=n(10095),O=n(27104);let B=(0,m.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});B.displayName="FileTreeContext";var $=n(63648);let V="ReposFileTreePane-module__HideTree__AYZnm",D="ReposFileTreePane-module__PaneContentsHiddenOnNarrow__KY_EL";var W=n(99153),A=n(89497),G=n(88005),L=n(63187),U=n(33751),K=n(58630),z=n(7478);let H=(0,m.createContext)({});function M(e){let t,n,l,i,o,s=(0,r.c)(6),{children:c}=e,d=(0,m.useRef)(!1),u=(0,m.useRef)(!1),p=(0,m.useRef)(!0);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{d.current=e},s[0]=t):t=s[0];let f=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{u.current=e},s[1]=n):n=s[1];let h=n;s[2]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{p.current=e},s[2]=l):l=s[2];let g=l;s[3]===Symbol.for("react.memo_cache_sentinel")?(i={expandAllFolders:d,refreshTree:u,shouldFetchFolders:p,setExpandAllFolders:f,setRefreshTree:h,setShouldFetchFolders:g},s[3]=i):i=s[3];let y=i;return s[4]!==c?(o=(0,a.jsx)(H,{value:y,children:c}),s[4]=c,s[5]=o):o=s[5],o}function Z(){return(0,m.use)(H)}H.displayName="FileTreeControlContext",M.displayName="FileTreeControlProvider";var q=n(52870);function J(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),l=t.indexOf("/"),i=l>0?t.slice(0,l):t,o=`${e}/${i}`;if(n&&n.some(e=>e.path===o))continue;let s={items:[],data:{contentType:o===r?"file":"directory",name:i,path:o,isClientOnly:!0}};a.push(s)}return a}function Y(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let a=t.name.slice(0,t.name.lastIndexOf("/")),r=a.indexOf("/")>-1,l={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:a,hasSimplifiedPath:r},i={items:[e],data:l};return(n.set(l.path,i),r)?Y(i,{...l},n):i}function Q(e,t,n,a,r=!1){if(!e)return{newRootItems:n,rootItemsUpdated:!1,itemsAdded:!1};let l=!!e[""]&&X("",t,n,e[""].items);a?.(n);let i=l;for(let l of Object.keys(e).sort())if(l){let o=t.get(l);if(o){let s=o.items.length;if(X(l,t,o.items,e[l].items,a),o.data.totalCount=e[l].totalCount,o.items.length>s&&(i=!0),r&&o.items.length>s){let e={...o,items:[...o.items]};t.set(l,e),function(e,t,n,a){let r=n.lastIndexOf("/");if(-1===r){let e=t.findIndex(e=>e.data.path===n);-1!==e&&(t[e]=a)}else{let t=n.substring(0,r),l=e.get(t);if(l){let e=l.items.findIndex(e=>e.data.path===n);-1!==e&&(l.items[e]=a)}}}(t,n,l,e)}}}return{newRootItems:n,rootItemsUpdated:l,itemsAdded:i}}function X(e,t,n,a,r){let l=!1;for(let i of a){let a=e?`${e}/${i.name}`:i.name;if(!t.get(a)){let e={items:[],data:{...i}};if(t.set(a,e),i.hasSimplifiedPath){let a=Y(e,i,t),o=n.findIndex(e=>e.data.path===a.data.path);-1!==o?a.items.length>n[o].items.length&&(n[o]=a,l=!0):(n.push(a),r?.(n))}else n.push(e),r?.(n)}}return l}function ee(e){let t,n,l,i,o,s,d,u,p,h,g,y,x=(0,r.c)(43),{isActive:_,file:w,onItemSelected:v,getItemUrl:F,selectedItemRef:R,navigate:b,onRenderRow:T,getFileTrailingVisual:C,getFileIcon:I}=e,{sendRepoClickEvent:j}=(0,f.T)(),k=m.useRef(null);x[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:k,mouseRowRef:k},x[0]=t):t=x[0];let N=(0,L.Z)(t),S="submodule"===w.data.contentType;x[1]!==w.data||x[2]!==C?(n=C?.(w.data),x[1]=w.data,x[2]=C,x[3]=n):n=x[3];let E=n;x[4]!==w.data||x[5]!==F||x[6]!==_||x[7]!==S||x[8]!==b||x[9]!==v||x[10]!==j?(l=e=>{S?(e.preventDefault(),w.data.submoduleUrl&&(window.location.href=w.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(F(w.data),"_blank"),e.preventDefault()):_?e.preventDefault():(v?.(),j("FILES_TREE.ITEM",{item_path:w.data.path}),b(F(w.data)),e.stopPropagation())},x[4]=w.data,x[5]=F,x[6]=_,x[7]=S,x[8]=b,x[9]=v,x[10]=j,x[11]=l):l=x[11];let P=l;T?.();let O=`${w.data.path}-item`,B=_?void 0:"auto 2rem";x[12]!==w.data||x[13]!==I||x[14]!==S?(i=I?I(w.data):S?(0,a.jsx)(c.FileSubmoduleIcon,{}):(0,a.jsx)(c.FileIcon,{}),x[12]=w.data,x[13]=I,x[14]=S,x[15]=i):i=x[15],x[16]!==i?(o=(0,a.jsx)(K.G.LeadingVisual,{children:i}),x[16]=i,x[17]=o):o=x[17];let $=S?"var(--fgColor-accent, var(--color-accent-fg))":void 0;return x[18]!==$?(s={color:$},x[18]=$,x[19]=s):s=x[19],x[20]!==w.data.name||x[21]!==R||x[22]!==s?(d=(0,a.jsx)("span",{ref:R,style:s,children:w.data.name}),x[20]=w.data.name,x[21]=R,x[22]=s,x[23]=d):d=x[23],x[24]!==w.data.name||x[25]!==N?(u=N&&(0,a.jsx)(A.m,{"data-testid":`${w.data.name}-item-tooltip`,id:`${w.data.name}-item-tooltip`,contentRef:k,"aria-label":w.data.name,open:!0,direction:"ne"}),x[24]=w.data.name,x[25]=N,x[26]=u):u=x[26],x[27]!==d||x[28]!==u?(p=(0,a.jsxs)(a.Fragment,{children:[d,u]}),x[27]=d,x[28]=u,x[29]=p):p=x[29],x[30]!==E?(h=!!E?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:E.screenReaderText}),x[30]=E,x[31]=h):h=x[31],x[32]!==E?(g=!!E?.trailingVisual&&(0,a.jsx)(K.G.TrailingVisual,{children:E.trailingVisual}),x[32]=E,x[33]=g):g=x[33],x[34]!==_||x[35]!==P||x[36]!==p||x[37]!==h||x[38]!==g||x[39]!==O||x[40]!==B||x[41]!==o?(y=(0,a.jsxs)(K.G.Item,{ref:k,onSelect:P,current:_,id:O,containIntrinsicSize:B,children:[o,p,h,g]}),x[34]=_,x[35]=P,x[36]=p,x[37]=h,x[38]=g,x[39]=O,x[40]=B,x[41]=o,x[42]=y):y=x[42],y}ee.displayName="WrappedFileTreeRow";let et=m.memo(ee);function en({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:r,leadingPath:l="",onItemSelected:i,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:u,onRenderRow:p,getFileTrailingVisual:h,getFileIcon:g,navigateOnClick:y=!0,treeName:x}){let{expandAllFolders:_,shouldFetchFolders:w}=Z(),[v,F]=(0,m.useState)(_?.current||r),{sendRepoClickEvent:R}=(0,f.T)(),b=m.useRef(null),T=m.useRef(null),C=(0,L.Z)({focusRowRef:T,mouseRowRef:b}),[I,j,k,N,S,E,P]=function(e,t,n){let[a,r]=m.useState(e.items),[l,i]=m.useState(e.data.totalCount||0),[o,s]=m.useState(!1),[c,d]=m.useState(!1),{safeSetTimeout:u}=(0,q.A)();m.useEffect(()=>{r(e.items)},[e.items]),m.useEffect(()=>{void 0!==e.data.totalCount&&i(e.data.totalCount)},[e.data.totalCount]);let p=m.useCallback(()=>{d(!1)},[]),f=m.useCallback((e,t)=>{let n=e||[...a];r(n.slice(0,100)),u(()=>{r(n),void 0!==t&&i(t)},1)},[a,u]);return[m.useCallback(async a=>{let l=new Map;if(e.data.isClientOnly){if(a){let n=J(e.data.path,a);for(let e of n)l.set(e.data.path,e);t({type:"add",folders:l,processingTime:0}),n.length>100?f(n,n.length):(r(n),i(n.length))}}else{let o=n(e.data);d(!1),s(!0);let c=Date.now();try{let n=await (0,$.f)(o),s=n.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.tree.items.length};return(l.set(e.path,t),e.hasSimplifiedPath)?Y(t,e,l):t});if(a){let t=e.data.path,r=J(t,a,n.tree.items);for(let e of(s.push(...r),r))l.set(e.data.path,e)}t({type:"add",folders:l,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=n.tree.totalCount,s.length>100?f(s,n.tree.totalCount):(r(s),i(n.tree.totalCount))}catch{d(!0)}}s(!1)},[n,e,t,f]),f,a,o,c,p,l]}(t,o,c),O=P-k.length,B=l?`${l}/`:"";(0,m.useEffect)(()=>{_?.current&&!v&&F(!0)},[t,_,v]);let V=m.useCallback(a=>{_?.current&&(_.current=!1),a&&!v&&!N&&!S&&(t.items.length>100?j():0!==t.items.length||n||r||w?.current===!1||I(e)),a!==v&&F(a)},[_,v,N,S,t.items.length,n,r,w,j,I,e]),D=m.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&y?(window.open(s(t.data),"_blank"),e.preventDefault()):n?e.preventDefault():(i?.(),R("FILES_TREE.ITEM",{item_path:t.data.path}),y?u(s(t.data)):V?.(!v),e.stopPropagation())},[t.data,s,n,v,u,y,i,V,R]);m.useEffect(()=>{r&&!v&&V?.(!0)},[r]),m.useEffect(()=>{0===t.items.length&&v?V?.(!1):!v&&t.autoExpand&&V?.(!0)},[t.items.length]);let W=m.useCallback(e=>{d&&n&&d(e),b.current=e},[d,n]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,a.jsx)(el,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:B+t.data.name,inheritsActive:n,dispatchKnownFolders:o,onItemSelected:i,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:y,getFileTrailingVisual:h,getFileIcon:g,treeName:x}):(p?.(),(0,a.jsxs)(K.G.Item,{ref:T,expanded:v,onExpandedChange:V,current:n,onSelect:D,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,a.jsx)(K.G.LeadingVisual,{children:(0,a.jsx)(K.G.DirectoryIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{ref:W,children:[B,t.data.name]}),C&&(0,a.jsx)(A.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:T,"aria-label":`${B}${t.data.name}`,open:!0,direction:"ne"})]}),(0,a.jsx)(K.G.SubTree,{state:N?"loading":S?"error":"done",children:S?(0,a.jsx)(K.G.ErrorDialog,{onRetry:I,onDismiss:E,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el,{clientOnlyFilePaths:e,directoryItems:k,dispatchKnownFolders:o,onItemSelected:i,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:y,getFileTrailingVisual:h,getFileIcon:g,treeName:x}),O>0&&(0,a.jsx)(eo,{message:`${O} entries not shown`})]})})]}))}et.displayName="FileTreeRow",en.displayName="WrappedDirectoryTreeRow";let ea=m.memo(en);function er({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:l,dispatchKnownFolders:i,selectedItemRef:o,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:u,directoryNavigateOnClick:p=!0,treeName:f}){let h=(0,W.l)(),g=(0,v.Z)(),y=(0,U.Z)(),x=m.useRef(y);return(0,a.jsx)(a.Fragment,{children:t.map(t=>{let m=h===t.data.path,y=m||h.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,a.jsx)(ea,{clientOnlyFilePaths:e,isActive:r||m,isAncestorOfActive:y,onItemSelected:l,leadingPath:n,directory:t,dispatchKnownFolders:i,getItemUrl:c,getFetchUrl:g.getItemUrl,selectedItemRef:y?o:void 0,navigate:x.current,onRenderRow:s,navigateOnClick:p,getFileTrailingVisual:d,getFileIcon:u,itemCount:t.items.length,treeName:f},t.data.name):(0,a.jsx)(et,{onItemSelected:l,file:t,isActive:m,getItemUrl:c,selectedItemRef:m?o:void 0,navigate:x.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:u,treeName:f},t.data.name)})})}ea.displayName="DirectoryTreeRow",er.displayName="WrappedDirectoryContents";let el=m.memo(er);function ei(e){let{clientOnlyFilePaths:t,data:n,rootItems:r,setRootItems:l,fetchError:i,incompleteFileTree:o,processingTime:s,loading:c,onRenderRow:d,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,sortDirectoryItems:g,treeName:y}=e,{knownFolders:x,dispatchKnownFolders:_}=(0,m.use)(B),{refreshTree:w}=Z(),v=(0,G.E)();m.useEffect(()=>{if(c)return;let e=new Map,t=[];w?.current||(e=new Map(x),t=r.slice());let{newRootItems:a,rootItemsUpdated:i,itemsAdded:o}=Q(n,e,t,g,v),d=v&&o;(a.length>r.length||i||d||w?.current)&&l(a),(e.size>x.size||d||w?.current)&&_({type:"set",folders:e,processingTime:s}),w?.current&&(w.current=!1)},[n,c]);let F=m.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{onMouseDown:F,className:(0,u.$)(e.className,"ReposFileTreeView-module__Box__vkb5W"),"data-testid":"repos-file-tree-container",children:c?(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_1__97JKJ",children:(0,a.jsx)(z.A,{"aria-label":"Loading file tree"})}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(K.G,{"aria-label":"Files",children:[i&&(0,a.jsx)(eo,{message:"Some files could not be loaded."}),o&&(0,a.jsx)(eo,{message:"Sign in to see the full file tree."}),(0,a.jsx)(el,{clientOnlyFilePaths:t,directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:_,selectedItemRef:e.selectedItemRef,onRenderRow:d,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,treeName:y})]})})})})}function eo(e){let t,n,l=(0,r.c)(3),{message:i}=e,o=i||"Couldn't load.";return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(K.G.LeadingVisual,{children:(0,a.jsx)(P.A,{icon:c.AlertFillIcon,className:"ReposFileTreeView-module__Octicon__GMgHV"})}),l[0]=t):t=l[0],l[1]!==o?(n=(0,a.jsxs)(K.G.Item,{id:"error-tree-row",children:[t,(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_2__y5uWW",children:o})]}),l[1]=o,l[2]=n):n=l[2],n}el.displayName="DirectoryContents",ei.displayName="ReposFileTreeView",eo.displayName="ErrorTreeRow";var es=n(41991);function ec(e){let t,n,o,s,d,m,p=(0,r.c)(18),{className:f,onClick:h,textAreaId:g}=e,{searchShortcut:y}=(0,i.wk)(),x=y.hotkey;return p[0]!==h?(t=e=>{h?.(),(0,es.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})},p[0]=h,p[1]=t):t=p[1],p[2]!==f?(n=(0,u.$)("SearchButton-module__IconButton__SBlqu",f),p[2]=f,p[3]=n):n=p[3],p[4]!==y.hotkey||p[5]!==t||p[6]!==n?(o=(0,a.jsx)(N.K,{"aria-label":"Search this repository",tooltipDirection:"nw",icon:c.SearchIcon,"data-hotkey":x,size:"medium",onClick:t,className:n}),p[4]=y.hotkey,p[5]=t,p[6]=n,p[7]=o):o=p[7],p[8]!==h||p[9]!==g?(s=()=>{let e=document.getElementById(g);h?.(),(0,es.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},p[8]=h,p[9]=g,p[10]=s):s=p[10],p[11]!==y.hotkey||p[12]!==s||p[13]!==g?(d=(0,a.jsx)(l._,{buttonFocusId:g,buttonHotkey:y.hotkey,onButtonClick:s,onlyAddHotkeyScopeButton:!0}),p[11]=y.hotkey,p[12]=s,p[13]=g,p[14]=d):d=p[14],p[15]!==o||p[16]!==d?(m=(0,a.jsxs)(a.Fragment,{children:[o,d]}),p[15]=o,p[16]=d,p[17]=m):m=p[17],m}ec.displayName="SearchButton";let ed=C.Gy.xxxlarge;function eu({clientOnlyFilePaths:e,collapseTree:t,showTree:n,fileTree:r,treeToggleElement:l,treeToggleRef:i,onItemSelected:o,processingTime:d,searchBoxRef:p,repo:f,path:R,refInfo:W,isFilePath:A,foldersToFetch:G,incompleteFileTree:L,id:U,onFindFilesShortcut:K,textAreaId:z,getItemUrlOverride:H,headerClassName:M,paneClassName:Z,paneContentsClassName:q,treeContainerClassName:J,findFileWorkerPath:Y,headerContent:X,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,showFindFile:ea=!0,directoryNavigateOnClick:er=!0,showRefSelectorRow:el=!0,paneResizable:eo=!0}){if(ea&&void 0===Y)throw Error("findFileWorkerPath must be provided when showFindFile is true");let es=(0,w.RF)(),{canEdit:eu,fileExistsOnDefault:ef}=(0,x.M)(),[eh,eg]=m.useState(G.length>0),[ey,ex]=m.useState(!1),e_=m.useRef([]),ew=m.useRef(0),ev=m.useRef(null),eF=m.useRef(!1),eR=m.useRef(null),{query:eb}=(0,_.JS)(),eT=m.useRef(eb);eT.current=eb;let{codeCenterOption:eC}=(0,I.ud)(),eI=m.useRef(es),{isServer:ej}=(0,s.V)(),{defaultBranch:ek}=(0,F.t)(),{getItemUrl:eN}=(0,v.Z)(),eS=H||eN,eE=[],eP=new Map,eO=m.useRef(eh);!eO.current&&r&&(eE=Q(r,eP,[],en).newRootItems),eO.current=!0;let[eB,e$]=m.useReducer(em,eP),[eV,eD]=m.useState(eE);m.useEffect(()=>{n&&(!eb||window.innerWidth>=C.Gy.large)||(eR.current=null)},[n,eb]),m.useEffect(()=>{es&&eI.current!==es&&window.innerWidth<ed&&t({setPreference:!1}),eI.current=es},[t,es]);let eW=m.useCallback(async e=>{let t=eN({contentType:"directory",path:e,name:e});try{let n=await (0,$.f)(t),a={items:n.tree.items,totalCount:n.tree.totalCount};r[e]=a}catch{ex(!0)}e_.current.push(e),ew.current-=1,0===ew.current&&eg(!1)},[r,eN]);m.useEffect(()=>{if(L)return void eg(!1);if(!G||0===G.length)return;let e=G.filter(e=>!e_.current.includes(e));if(e.length>0)for(let t of(ew.current+=e.length,eg(!0),e))eW(t)},[eW,G,L]);let eA=m.useCallback(e=>{n&&(!eT.current||window.innerWidth>=C.Gy.large)&&ev.current&&e&&(0,j.Rt)(e,ev.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[n]),eG=m.useCallback(e=>{e&&eF.current?eF.current=!1:eR.current!==e&&eA(e),eR.current=e},[eA]),eL=m.useCallback(e=>{ev.current=e,window.innerWidth>=ed&&eA(eR.current)},[eA]),eU=m.useCallback(e=>{e&&eA(eR.current)},[eA]),{screenSize:eK}=(0,C.lm)(),ez=!ej&&(es&&eK<ed||eK<C.Gy.xlarge)&&eK>=C.Gy.large,eH=m.useCallback(()=>{ez||o(),eF.current=!0},[o,ez]),eM=A?R.substring(0,R.lastIndexOf("/")):R,eZ=(0,m.useMemo)(()=>({knownFolders:eB,dispatchKnownFolders:e$}),[eB]),eq=m.useMemo(()=>ej?null:(0,O.KF)(),[ej]),eJ=m.useCallback(()=>{window.innerWidth>C.Gy.large&&window.innerWidth<C.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eY=W.name===ek,eQ=(0,a.jsxs)("div",{id:U,className:(0,u.$)("ReposFileTreePane-module__PaneContents__SJjfF",ej&&D,q),children:[(0,a.jsxs)("div",{className:(0,u.$)(M,"ReposFileTreePane-module__Box_1__PpIop"),children:[X,el&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_2__g74WI",children:[(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_3__D6cTp",children:eY||void 0===ef?(0,a.jsx)(y.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0}):(0,a.jsxs)(k.A,{className:"ReposFileTreePane-module__FullWidthButtonGroup__tyEfq",children:[ef?(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",as:T.N,to:(0,b.IO9)({repo:f,commitish:ek,action:"blob",path:R})}):(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",description:"File does not exist on default branch","aria-disabled":!0,inactive:!0}),(0,a.jsx)(y.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})]})}),(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_4__DG4pa",children:[eu&&(0,a.jsx)(N.K,{"aria-label":"Add file",tooltipDirection:"n",as:T.N,icon:c.PlusIcon,to:(0,b.IO9)({repo:f,path:eM,commitish:W.name,action:"new"}),onClick:eH,className:"ReposFileTreePane-module__IconButton__rGggU"}),(0,a.jsx)(ec,{className:eu?"ReposFileTreePane-module__SearchButtonWithLeftBorder__TBrDc":void 0,onClick:eJ,textAreaId:z})]})]})]}),W.currentOid&&ea&&Y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.default,{commitOid:W.currentOid,findFileWorkerPath:Y,onItemSelected:o,searchBoxRef:p,className:(0,u.$)("ReposFileTreePane-module__FileResultsList__zmSnM",ej&&D)}),(0,a.jsx)(h,{inputRef:p,onFindFilesShortcut:K,textAreaId:z})]}),(0,a.jsx)(ep,{scrollingRef:ev}),(0,a.jsxs)("div",{ref:eL,className:(0,u.$)("ReposFileTreePane-module__Box_5__Zy_o6",ej&&D),children:[ej?W.currentOid&&(0,a.jsx)("div",{className:eb?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ei,{clientOnlyFilePaths:e,data:r,rootItems:eV,selectedItemRef:eG,setRootItems:eD,onItemSelected:eH,processingTime:d,loading:eh,fetchError:ey,incompleteFileTree:L,directoryNavigateOnClick:er,getItemUrl:eS,className:J,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:W.name})}):eq&&(0,a.jsx)(O.bL,{node:eq}),!W.currentOid&&!f.isEmpty&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_6__KnilA",children:[(0,a.jsx)(P.A,{icon:c.AlertFillIcon}),"\xa0Ref is invalid"]})]})]});return(0,a.jsxs)(B,{value:eZ,children:[eq&&(0,a.jsx)(O.oj,{node:eq,children:W.currentOid&&(0,a.jsx)("div",{className:eb?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ei,{clientOnlyFilePaths:e,data:r,directoryNavigateOnClick:er,rootItems:eV,selectedItemRef:eG,setRootItems:eD,onItemSelected:eH,processingTime:d,loading:eh,fetchError:ey,incompleteFileTree:L,getItemUrl:eS,className:J,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:W.name})})}),!n&&eC.enabled&&l&&(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_7__T2yBS",children:l}),(0,a.jsx)(S.O7.Pane,{position:"start",sticky:!0,padding:"none",width:"large",resizable:!!eo,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},className:(0,u.$)("ReposFileTreePane-module__Pane__rBZpI",!n&&V,ez||es?"ReposFileTreePane-module__HidePaneWithTreeOverlay__mFFGX":"ReposFileTreePane-module__HidePane__VHAVt",Z),children:n&&!ez&&(0,a.jsx)("div",{className:ej?es?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eQ})}),n&&ez&&eI.current===es&&(0,a.jsx)(E.Ay,{className:(0,u.$)(ej?es?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,"ReposFileTreePane-module__Overlay__Lgnte",!n&&V),ref:eU,returnFocusRef:i,onClickOutside:eJ,onEscape:eJ,top:0,position:"fixed",children:(0,a.jsx)(a.Fragment,{children:eQ})})]})}function em(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,R.BI)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,R.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function ep({scrollingRef:e}){let[t,n]=m.useState(e.current&&e.current.scrollTop>0);return m.useEffect(()=>{if(e.current){let t=e.current,a=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}}},[e]),t?(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_8__TLAjy"}):null}eu.displayName="ReposFileTreePane",ep.displayName="TreeBorder";var ef=n(54914),eh=n(31631),eg=n(13564),ey=n(70730),ex=n(46249);function e_(e,t,n,r,l,i="fileTreeExpanded",o){let{sendRepoClickEvent:s}=(0,f.T)(),c=(0,eg.i)(),d=i?(0,eh.Ri)(i):void 0,u=void 0===ey.XC,h=!c&&d&&"false"!==d.value||c&&n;void 0===h&&(h=!1);let g=(0,m.useRef)(null),y=(0,m.useRef)(null),{screenSize:x}=(0,C.lm)(),[_,w]=(0,m.useState)(h),v=(0,m.useRef)(h),F=(0,m.useRef)(!1),R=(0,m.useRef)(!1),b=(0,m.useCallback)(()=>!(t.current&&window.innerWidth>=ed||!t.current&&window.innerWidth>=C.Gy.xlarge),[t]);(0,m.useLayoutEffect)(()=>{let e=b();e||(F.current=!1),w((0,ef.q)()&&x<C.Gy.large&&!R.current||(!e||F.current)&&(c&&_||!c&&d?.value!=="false"))},[F,d?.value,x,t,b,c]);let T=(0,m.useRef)(_);(0,m.useLayoutEffect)(()=>{T.current=_}),(0,m.useLayoutEffect)(()=>{let e=t.current?ed:C.Gy.xlarge,n=window.innerWidth<e,a=window.innerWidth>=e;n&&v.current&&!(0,ef.q)()&&T.current&&w(!1),a&&v.current&&!T.current&&w(!0)},[t,x]);let I=(0,m.useCallback)(e=>{if(w(!0),b()&&(F.current=!0),e?.setPreference&&(l?.(!0),v.current=!0,i)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eh.TV)(i,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>g.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>y.current?.focus())},[i,2592e6,b,l]),j=(0,m.useCallback)(e=>{if(w(!1),F.current=!1,R.current=!0,e?.setPreference&&(l?.(!1),v.current=!1,i)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eh.TV)(i,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>g.current?.focus())},[i,2592e6,l]),k=(0,m.useCallback)(e=>e&&window.innerWidth>=ed||!t.current&&window.innerWidth>=C.Gy.xlarge,[t]),N=(0,m.useCallback)(()=>{s(T.current?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),T.current?j({focus:"toggleButton",setPreference:k(t.current)}):I({focus:"toggleButton",setPreference:k(t.current)})},[s,j,k,t,I]),S=void 0!==d||_||u?void 0:"react-tree-toggle-button-with-indicator",E=(0,m.useMemo)(()=>(0,a.jsx)(ex.A,{as:"h2",className:"use-tree-pane-module__Heading__s4QbZ",children:(0,a.jsx)(p,{expanded:_,ariaControls:e,onToggleExpanded:N,className:S,ref:g,textAreaId:r,...o})}),[_,e,N,S,r,o]);return{isTreeExpanded:_,expandTree:I,collapseTree:j,treeToggleElement:E,treeToggleRef:g,searchBoxRef:y}}},35044(e,t,n){n.d(t,{G:()=>a});let a=e=>({})},84048(e,t,n){n.d(t,{T2:()=>c,cp:()=>f,ud:()=>g});var a=n(74848),r=n(16522),l=n(69991),i=n(96540);let o=(0,l.A)("localStorage"),s="codeView.codeFolding",c="codeView.codeWrapping",d="codeView.centerView",u="codeView.openSymbolsOnClick",m=new Map([[s,"Show code folding buttons"],[c,"Wrap lines"],[d,"Center content"],[u,"Open symbols on click"]]),p=(0,i.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}});p.displayName="CodeViewOptionsContext";let f=e=>{let t,n,l=(0,r.c)(8),{children:i}=e,o=h(s,!0),m=h(c,!1),f=h(d,!1),g=h(u,!0);l[0]!==f||l[1]!==o||l[2]!==m||l[3]!==g?(t={codeFoldingOption:o,codeWrappingOption:m,codeCenterOption:f,openSymbolsOption:g},l[0]=f,l[1]=o,l[2]=m,l[3]=g,l[4]=t):t=l[4];let y=t;return l[5]!==i||l[6]!==y?(n=(0,a.jsx)(p,{value:y,children:i}),l[5]=i,l[6]=y,l[7]=n):n=l[7],n};function h(e,t){let n,a,l,s,c=(0,r.c)(11);c[0]!==e?(n=o.getItem(e),c[0]=e,c[1]=n):n=c[1];let d=n;c[2]!==t||c[3]!==d?(a=()=>d?"true"===d:t,c[2]=t,c[3]=d,c[4]=a):a=c[4];let[u,p]=(0,i.useState)(a);c[5]!==e?(l=m.get(e)||"",c[5]=e,c[6]=l):l=c[6];let f=l;return c[7]!==u||c[8]!==f||c[9]!==e?(s={name:e,enabled:u,setEnabled:p,label:f},c[7]=u,c[8]=f,c[9]=e,c[10]=s):s=c[10],s}function g(){return(0,i.use)(p)}f.displayName="CodeViewOptionsProvider"}}]);
//# sourceMappingURL=80352-37f58cb7111a3a54-b5adb1ee7b8c2d04.js.map