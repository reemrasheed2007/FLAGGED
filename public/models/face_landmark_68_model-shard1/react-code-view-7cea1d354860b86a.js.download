performance.mark("js-parse-end:react-code-view-7cea1d354860b86a.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["8145"],{74488(e,t,n){n.d(t,{P:()=>s});var r=n(35148),o=n(81673),l=n(23148),a=n(96540),i=n(39050);function s(e){let t=(0,l.B)(),n=e||t,s=(0,a.useRef)(n),c=(0,o.q)();if(n)s.current=n;else{let e=(0,r.n7E)(location.pathname,s.current.refInfo.name,s.current.path);n=(0,i.Bl)(s.current,c,e)}return n}},39050(e,t,n){n.d(t,{Bl:()=>l,aO:()=>o});var r=n(43300);function o(e){return(0,r.H)(e)?{...e.fileTree,[e.path]:{items:e.tree.items,totalCount:e.tree.totalCount}}:e.fileTree}function l(e,t,n){return{path:n,repo:e.repo,refInfo:e.refInfo,currentUser:e.currentUser,fileTree:o(e),fileTreeProcessingTime:e.fileTreeProcessingTime,foldersToFetch:e.foldersToFetch,allShortcutsEnabled:e.allShortcutsEnabled,treeExpanded:e.treeExpanded,symbolsExpanded:e.symbolsExpanded,codeLineWrapEnabled:e.codeLineWrapEnabled,isMarketplaceEnabled:e.isMarketplaceEnabled,error:t||void 0}}},89381(e,t,n){var r=n(4013),o=n(80413),l=n(63583),a=n(74848),i=n(77734),s=n(50786),c=n(77728),d=n(85501),u=n(20305),p=n(259),h=n(36570),f=n(712),m=n(44162),b=n(40802),x=n(71716),E=n(99153),w=n(29827),g=n(47032),v=n(1687),j=n(74488),I=n(39050);function y(e){return"editInfo"in e&&"webCommitInfo"in e}var C=n(15599),T=n(84815),S=n(43300),k=n(8836),O=n(84190),R=n(33304),N=n(99159),A=n(84048),_=n(91701),F=n(64663),B=n(11421),D=n(87555),P=n(94709),M=n(96540),W=n(86579),z=n(60375),L=n(96769),H=n(1496),V=n(68413),q=n(23828),Q=n(91368),G=n(62080),U=n(6159),$=n(15689),X=n(91750),Z=n(91874),K=n(16418),Y=n(13987),J=n(85341),ee=n(99873),et=n(25661);let en=(0,M.lazy)(()=>Promise.all([n.e("90225"),n.e("67985"),n.e("61110"),n.e("12287"),n.e("30045"),n.e("8857"),n.e("72608"),n.e("43540"),n.e("51210"),n.e("83843"),n.e("54479"),n.e("93859"),n.e("74357"),n.e("39493"),n.e("12182"),n.e("87438"),n.e("33247"),n.e("38263"),n.e("94355"),n.e("64823")]).then(n.bind(n,57991)));function er({initialPayload:e}){let t=(0,j.P)(e);return(0,a.jsx)(el,{payload:t,isDataRouter:!1})}en.displayName="BlobEditor",er.displayName="CodeViewEntrypoint";let eo=e=>{(0,ee.Q)(e,null,null)};function el({payload:e,isDataRouter:t=!0}){let n,r=(0,k.t)(),{findFileWorkerPath:o}=(0,m.s)(),{path:l}=e,j=(0,v.p)(e.refInfo),ee=y(e),er=(0,C.m)(e),el=(0,C.K)(e),ea=(0,T.i)(e),[ei,es]=(0,M.useState)(null),ec=(0,X.U6)(r,j,l,e.error?.httpStatus===404),ed=(0,$.TX)(r,j,l,e.error?.httpStatus===404,er||el?e.blob.rawLines?.length??1e5:1e5),eu=M.useRef(null),ep=M.useRef(!1),eh=M.useRef(!1),ef=M.useRef(null),em=M.useRef(null),eb="repos-file-tree",ex=M.useRef(void 0);(0,B.R)("hpc",t=>{!(0,S.H)(e)||t.detail.hpc&&(0,N.au)({name:"CODE_VIEW_TREE_HPC",value:t.detail.hpc,tags:{app:"react-code-view",soft:String(t.detail.soft),ssr:String(t.detail.ssr),mechanism:String(t.detail.mechanism)}})}),(0,B.R)("inp",t=>{!(0,S.H)(e)||t.detail.inp&&(0,N.au)({name:"CODE_VIEW_TREE_INP",value:t.detail.inp,tags:{app:"react-code-view",inpInteractionType:t.detail.inpInteractionType||"unknown",inpEventType:t.detail.inpEventType||"unknown",inpBottleneck:t.detail.inpBottleneck||"unknown"}})});let{toggleFocusedPaneShortcut:eE}=(0,g.wk)();(0,_.t)(),(0,F.L)(!0);let ew=M.useMemo(()=>(0,I.aO)(e),[e.path,e.refInfo.currentOid]),{isTreeExpanded:eg,collapseTree:ev,expandTree:ej,treeToggleElement:eI,treeToggleRef:ey,searchBoxRef:eC}=(0,O.qn)(eb,ex,e.treeExpanded,et.wQ,eo),eT=(0,M.useCallback)(()=>{window.innerWidth<R.Gy.large&&ev({focus:null})},[ev]),[eS,ek]=(0,M.useState)(!0);(0,M.useEffect)(()=>{let e;if(!window.location.hash&&window.scrollY>0){let t=document.querySelector("#StickyHeader");t&&(t.style.position="relative",t.scrollIntoView(),e=requestAnimationFrame(()=>{t.style.position="sticky"}))}return()=>{void 0!==e&&cancelAnimationFrame(e)}},[e.path]);let{codeCenterOption:eO}=(0,A.ud)(),eR=M.useCallback(()=>{window.innerWidth<R.Gy.large&&ej({focus:"search"})},[ej]);return n=ee?e.editInfo.isNewFile?"new":"edit":el?"blame":er?"blob":"tree",(0,a.jsx)(X.mD,{...ec,children:(0,a.jsx)($.Zj,{...ed,children:(0,a.jsx)(E.n,{path:l,children:(0,a.jsx)(c.O,{action:n,children:(0,a.jsx)(b.A,{isMarketplaceEnabled:e.isMarketplaceEnabled,children:(0,a.jsx)(p.d,{copilotAccessAllowed:e.copilotAccessAllowed??!1,copilotSpacesEnabled:e.copilotSpacesEnabled??!1,modelsAccessAllowed:e.modelsAccessAllowed??!1,modelsRepoIntegrationEnabled:e.modelsRepoIntegrationEnabled??!1,children:(0,a.jsx)(w.x,{refInfo:j,children:(0,a.jsx)(h.O,{canEdit:j.canEdit,canEditOnDefaultBranch:j.canEditOnDefaultBranch,fileExistsOnDefault:j.fileExistsOnDefault,children:(0,a.jsx)(d.$,{allShortcutsEnabled:e.allShortcutsEnabled,children:(0,a.jsxs)(O.Nq,{children:[(0,a.jsx)(G.U,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.Ck,{children:(0,a.jsx)(x.cD,{payload:e,openPanelRef:ex,children:(0,a.jsxs)(D.O7,{children:[(0,a.jsx)(P.az,{ref:eu,tabIndex:0,sx:{width:["100%","100%","auto"]},children:(0,a.jsx)(O.c2,{id:eb,repo:r,path:l,isFilePath:er||ee||ea,refInfo:j,collapseTree:ev,showTree:eg,fileTree:ew,onItemSelected:eT,processingTime:e.fileTreeProcessingTime,treeToggleElement:eI,treeToggleRef:ey,searchBoxRef:eC,foldersToFetch:e.foldersToFetch,incompleteFileTree:e.incompleteFileTree,onFindFilesShortcut:eR,textAreaId:et.wQ,findFileWorkerPath:o,headerContent:(0,a.jsxs)(P.az,{sx:{display:"flex",width:"100%",mb:3,alignItems:"center"},children:[eg&&eI,(0,a.jsx)(P.DZ,{as:"h2",sx:{fontSize:2,ml:2},children:"Files"})]})})}),(0,a.jsx)(D.O7.Content,{as:"div",padding:"none",width:eO.enabled?"xlarge":"full",hidden:{narrow:eg},children:(0,a.jsx)(P.az,{sx:{marginLeft:"auto",marginRight:"auto",flexDirection:"column",pb:6,maxWidth:"100%",mt:0},ref:es,"data-selector":"repos-split-pane-content",tabIndex:0,children:(0,a.jsx)(K.mx,{children:(0,a.jsx)(Z.w,{isBlame:el,children:(0,a.jsxs)(u.lG,{children:[(0,a.jsx)(P.az,{sx:{display:ee?"none":"inherit"},children:(0,a.jsx)(Q.Ay,{payload:e,showTree:eg,treeToggleElement:eI,validCodeNav:eS,onFindFilesShortcut:eR})}),e.error?(0,a.jsx)(i.D,{...e.error}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.az,{className:"react-code-view-bottom-padding",sx:{mx:3},children:(0,a.jsx)(H.Ay,{payload:e})}),(0,a.jsx)(P.az,{sx:{mx:3},children:(0,S.H)(e)?(0,a.jsx)(q.A,{tree:e.tree,showTree:eg,treeToggleElement:eI}):y(e)?(0,a.jsx)(M.Suspense,{fallback:(0,a.jsx)(U.f,{}),children:(0,a.jsx)(en,{collapseTree:ev,editInfo:e.editInfo,repo:e.repo,showTree:eg,treeToggleElement:eI,webCommitInfo:e.webCommitInfo,copilotInfo:e.copilotInfo,copilotGenerateCommitMessageAuthInfo:e.copilotGenerateCommitMessageAuthInfo,isDataRouter:t},`${e.path}_${e.editInfo.fileName}_${e.editInfo.isNewFile}`)}):er?(0,a.jsx)(J.s,{blob:e.blob,children:(0,a.jsx)(Y.k,{blame:e.blame,children:(0,a.jsx)(L.C,{blame:e.blame,blob:e.blob,symbolsExpanded:e.symbolsExpanded,setValidCodeNav:ek,showTree:eg,treeToggleElement:eI,validCodeNav:eS,copilotInfo:e.copilotInfo})})}):ea?(0,a.jsx)(V.k,{deleteInfo:e.deleteInfo,webCommitInfo:e.webCommitInfo}):null})]})]})})})})})]})})}),(0,a.jsx)(z.t,{}),(0,a.jsx)(s._,{buttonFocusId:et.wQ,buttonHotkey:eE.hotkey,onButtonClick:()=>(function(){let e=document.getElementById(W.M),t=document.getElementById(et.wQ);if(document.activeElement?.id===et.wQ&&(eh.current=!0),ei?.contains(document.activeElement)&&!eh.current?ep.current=!0:eu.current?.contains(document.activeElement)&&(ep.current=!1),ep.current||eh.current)if(eh.current){let t=ef.current||e||ei;ep.current=!0,eh.current=!1,t?.focus()}else{let e=em.current||eu.current;ef.current=ei?.contains(document.activeElement)?document.activeElement:null,ep.current=!1,eh.current=!1,e?.focus()}else{let e=t||ei;em.current=eu.current?.contains(document.activeElement)?document.activeElement:null,ep.current=!1,e?.focus()}})()})]})]})})})})})})})})})})}el.displayName="CodeViewLegacy",(0,o.o)("react-code-view",()=>({App:l.q,routes:[(0,r.a)({path:"/:owner/:repo/tree/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/blob/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/blame/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/edit/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/new/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/new/:branch/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/tree/delete/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/delete/:branch/:path/*",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo",Component:er,shouldNavigateOnError:!0}),(0,r.a)({path:"/:owner/:repo/tree/:branch/*",Component:er,shouldNavigateOnError:!0})]}))},99589(e,t,n){n.d(t,{V:()=>c});var r=n(96540);let o={type:"browser",isBrowser:!0,isServer:!1},l={type:"server",isBrowser:!1,isServer:!0};function a(){return()=>{}}function i(){return o}function s(){return l}function c(){return(0,r.useSyncExternalStore)(a,i,s)}},5847(e,t,n){n.d(t,{I:()=>l});var r=n(96540),o=n(37979);function l(e,t,n=[]){let a=(0,r.useCallback)(e,n),i=(0,o.BP)(),s=(0,r.useRef)(i===o.O8.ClientRender),[c,d]=(0,r.useState)(()=>i===o.O8.ClientRender?a():t),u=(0,r.useCallback)(()=>{d(a)},[a]);return(0,r.useLayoutEffect)(()=>{s.current||d(a),s.current=!1},[a,...n]),[c,u]}},1827(e,t,n){n.d(t,{A:()=>l});var r=n(16522),o=n(96540);function l(){let e,t,n,l=(0,r.c)(3),a=(0,o.useRef)(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>a.current,l[0]=e):e=l[0];let i=e;return l[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(a.current=!0,()=>{a.current=!1}),n=[],l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,o.useLayoutEffect)(t,n),i}},12627(e,t,n){n.d(t,{X:()=>i});var r=n(16522),o=n(96540);function l(){return()=>{}}function a(){return!1}function i(e){let t,n=(0,r.c)(2);return n[0]!==e?(t=()=>{let t=function(){if("u"<typeof navigator);else if(/Windows/.test(navigator.userAgent))return"windows";else if(/Macintosh/.test(navigator.userAgent))return"mac";return null}();return null!==t&&e.includes(t)},n[0]=e,n[1]=t):t=n[1],(0,o.useSyncExternalStore)(l,t,a)}}},function(e){e.O(0,["11152","11268","13835","16073","16111","16251","19762","2966","32769","38728","41013","41954","42688","43142","437","49396","49863","56040","56093","57956","59299","59660","61300","62095","64220","65439","68751","7053","71365","72807","73494","73694","7463","7542","77499","78563","80352","81567","83465","90225","98131","99280","99602"],function(){return e(e.s=89381)}),e.O()}]);
//# sourceMappingURL=react-code-view-7cea1d354860b86a-0d3742f3f61e9959.js.map