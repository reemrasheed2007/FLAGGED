performance.mark("js-parse-end:43142-60af73dbb047bb6a.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["43142"],{87077(e,l,t){t.r(l),t.d(l,{FileResultRow:()=>I,default:()=>T});var s=t(74848),r=t(712),i=t(99153),a=t(90797),n=t(38489),o=t(8836),u=t(27159),c=t(35148),d=t(32222),f=t(33304),m=t(33751),h=t(29941),_=t(38621),g=t(45800),x=t(59134),p=t(18990),v=t(83223),R=t(66818),b=t(7478),E=t(94709),F=t(10095),y=t(91385),L=t(96540),C=t(62812),N=t(8334),j=t(54914),w=t(78994),S=t(34164);let A={excludeDirectories:!1,excludeSeeAllResults:!1};function T({actionListClassName:e,additionalResults:l,commitOid:t,config:d=A,findFileWorkerPath:_,getItemUrl:b,onRenderRow:F,onItemSelected:y,searchBoxRef:T,className:I,sx:$}){var q;let M,{excludeDirectories:z,excludeSeeAllResults:H}=d,{query:Z,setQuery:B}=(0,r.JS)(),O=(0,o.t)(),P=L.useRef(null),G=T??P,[K,V]=L.useState(Z.length>0),[U,Y]=L.useState(!!Z),{list:X,directories:J,loading:W,error:Q}=(0,w.o)(t,K,!!z),ee=(0,L.useMemo)(()=>new Set(J),[J]),el=(0,i.l)(),{getUrl:et}=(0,n.Z)(),{queryText:es,queryLine:er}=(M=(q=(q=Z).replaceAll(" ","")).indexOf(":"))>=0?{queryText:q.substring(0,M),queryLine:parseInt(q.substring(M+1),10)}:{queryText:q,queryLine:void 0},ei=(0,L.useDeferredValue)(es),{matches:ea,clearMatches:en}=function(e,l,t,s){let[r,i]=L.useState(),n=L.useRef(""),o=L.useRef(null),{sendStats:u}=(0,a.T)(),c=L.useRef(!1),d=L.useRef(""),f=(0,L.useEffectEvent)(()=>{let e=new C.z(t,N.j);e.onmessage=({data:e})=>{c.current=!1,(0,L.startTransition)(()=>{i(e.list)}),n.current=e.query,e.startTime&&e.query===d.current&&u("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e}),m=(0,L.useEffectEvent)((e,l)=>{let t=n.current&&l.startsWith(n.current);c.current=!0,d.current=l,o.current?.postMessage({baseList:t&&r||e,query:l,startTime:performance.now()})});return L.useEffect(()=>{if(s)return f(),function(){o.current?.terminate()}},[s]),L.useEffect(()=>{e.length&&l&&(c.current&&(o.current?.terminate(),f()),m(e,l))},[e,l]),{matches:r,clearMatches:(0,L.useCallback)(()=>i(void 0),[])}}((0,L.useMemo)(()=>[...X,...l??[]].sort(),[l,X]),ei,_,K),{sendRepoClickEvent:eo}=(0,a.T)(),eu=(0,m.Z)(),[ec,ed]=L.useState(0),[ef,em]=L.useState(()=>(0,j.q)()),eh=L.useRef(null),e_=L.useRef(null),eg="file-results-list",{sendRepoKeyDownEvent:ex}=(0,a.T)(),{screenSize:ep}=(0,f.lm)(),ev=d.enableOverlay??ep>=f.Gy.large,eR=L.useCallback(e=>{eo("FILE_TREE.SEARCH_RESULT_CLICK"),y?.(e),Y(!1)},[eo,y]),eb=(e,l,t)=>b?b(e,l,t):et({path:e,action:l?"tree":"blob",hash:t}),{containerRef:eE}=(0,g.G)({bindKeys:h.z0.ArrowVertical|h.z0.HomeAndEnd,focusInStrategy:"previous"},[W,Q]);L.useEffect(()=>{Z||Y(!1)},[Z]),L.useEffect(()=>{document.activeElement!==G.current&&ev&&Y(!1)},[el,G,ev]);let eF=(0,L.useMemo)(()=>ea?.slice(0,40)??[],[ea]),ey=ea&&ea.length>eF.length,eL=(0,s.jsx)("div",{className:(0,S.$)("FileResultsList-module__Box__vqkwS",{"FileResultsList-module__OverlayEnabled__eP6z3":ev}),children:Q?(0,s.jsx)(x.A,{variant:"danger",className:"tmp-m-3",children:"Failed to search"}):(0,s.jsxs)(p.l,{ref:eE,className:(0,S.$)(e,"FileResultsList-module__ActionList__KvCZP",{"FileResultsList-module__ActionList_Overlay__l70lt":ev}),role:"listbox",children:[!W&&eF.map((e,l)=>{let t=ee.has(e),r=eb(e,t,er?`L${er}`:"");return(0,s.jsx)(D,{active:e===el,index:l,focused:ef&&ec===l,match:e,onRender:F,query:ei,onClick:eR,isDirectory:t,to:r,useOverlay:ev,listRef:eE},e)}),(0,s.jsxs)("div",{className:"tmp-m-3 text-center",children:[(0,s.jsx)(k,{loading:W||!ea,visibleResultCount:eF.length,truncated:!!ey}),ey&&!H&&(0,s.jsxs)(s.Fragment,{children:["\xa0",(0,s.jsx)(v.A,{id:"see-all-results-link",className:(0,S.$)("focus-visible",{"FileResultsList-module__PrimerLink__Mmo7i":ef&&ec===eF.length}),ref:eh,href:(0,c.Y8Y)({owner:O.ownerLogin,repo:O.name,searchTerm:`path:${es}`}),children:"See all results"})]})]})]})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.az,{ref:e_,sx:$,className:I,children:(0,s.jsx)(j.Z,{ariaActiveDescendant:(!ev&&Z||ev&&U)&&ef&&ec>-1?ey&&ec===eF.length?"see-all-results-link":`file-result-${ec}`:void 0,ariaExpanded:ev?U:void 0,ariaHasPopup:ev,ariaControls:ev?eg:void 0,ref:G,query:Z,onKeyDown:e=>{let{key:l,shiftKey:t,metaKey:s,altKey:r,ctrlKey:i}=e;if(!t&&!s&&!r){if("Escape"===l)Z?(ex("FILE_TREE.CANCEL_SEARCH"),B(""),en()):document.activeElement&&document.activeElement.blur();else if(!Z)return;else if("Enter"===l){if(!H&&ey&&ec===eF.length)eu((0,c.Y8Y)({owner:O.ownerLogin,repo:O.name,searchTerm:`path:${es}`})),y?.();else if(eF[ec]){let e=eF[ec];eu(eb(eF[ec],!1,er?`L${er}`:"")),Y(!1),y?.(e)}}else if("ArrowDown"===l||i&&"n"===l){if(!H&&ey&&ec>=eF.length-1){if(ed(eF.length),eh.current&&eE.current){let e=(0,u.U)(eE.current);(0,h.Rt)(eh.current,e,{behavior:"instant"})}}else ed(Math.min(ec+1,eF.length-1));e.preventDefault();return}else if("ArrowUp"===l||i&&"p"===l){ed(Math.max(ec-1,0)),e.preventDefault();return}}},onPreload:()=>V(!0),onSearch:e=>{B(e),e?Y(!0):(en(),Y(!1)),ed(0)},onBlur:e=>{eE.current?.contains(e.relatedTarget)||(Y(!1),em(!1))},onFocus:()=>{Z&&Y(!0),em(!0)},className:"FileResultsList-module__FilesSearchBox__ivVkc"})}),ev&&(0,s.jsx)(R.T,{anchorRef:e_,open:ev&&U,renderAnchor:null,onClose:()=>{Y(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},width:"xlarge",align:"end",overlayProps:{id:eg,role:"dialog"},children:eL}),!ev&&Z&&eL]})}function k({visibleResultCount:e,truncated:l,loading:t}){return(0,s.jsx)("span",{role:"status",className:t||l||0===e?void 0:"sr-only","aria-label":t?"Loading":void 0,children:t?(0,s.jsx)(b.A,{size:"large"}):0===e?"No matches found":l?`First ${e} files shown.`:`Showing ${e} files.`},"results-count-status")}T.displayName="FileResultsList",k.displayName="FileResultsStatus";let I=({active:e,focused:l,index:t,match:r,query:i,to:a,isDirectory:n,onClick:o,onRender:c,useOverlay:f,listRef:m})=>{let _=(0,y.Xq)(i,r);c?.();let g=L.useRef(null),x=n?$:q;L.useEffect(()=>{if(l&&g.current&&m?.current){let e=(0,u.U)(m.current);(0,h.Rt)(g.current,e,{behavior:"instant"})}},[l,m]);let v=(0,L.useCallback)(()=>{o?.(r)},[r,o]);return(0,s.jsx)(p.l.Item,{role:"group",active:e,className:(0,S.$)(l?"FileResultsList-module__ActionList_ItemFocused__Yu7wK":void 0),children:(0,s.jsxs)(d.N,{to:a,ref:g,role:"option",onClick:v,id:`file-result-${t}`,tabIndex:f?-1:0,"data-focus-visible-added":l||void 0,className:(0,S.$)("d-flex","FileResultsList-module__ActionList_Item__X18Zr"),children:[(0,s.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,s.jsx)(M,{text:r,positionsList:_,LeadingIcon:x,className:"FileResultsList-module__HighlightMatch__wwEZz"})}),l&&(0,s.jsx)("div",{className:"sr-only",children:`Go to ${n?"folder":"file"}`})]})},r)};I.displayName="FileResultRow";let $=()=>(0,s.jsx)(F.A,{"aria-label":"Directory",icon:_.FileDirectoryFillIcon,size:"small",className:"FileResultsList-module__Octicon__T1mIF"});$.displayName="DirectoryIcon";let q=()=>(0,s.jsx)(F.A,{"aria-label":"File",icon:_.FileIcon,className:"fgColor-muted mr-2",size:"small"});q.displayName="FileResultIcon";let D=L.memo(I);function M({text:e,positionsList:l,className:t,LeadingIcon:r}){let i=[],a=0;for(let t of l){if(Number(t)!==t||t<a||t>e.length)continue;let l=e.slice(a,t);l&&i.push(z(l)),a=t+1,i.push((0,s.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:e[t]},t))}return i.push(z(e.slice(a))),(0,s.jsx)("div",{className:t,children:(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)(r,{}),i]})})}function z(e){return e.replaceAll("/","/\u200B")}D.displayName="MemoizedFileResultRow",M.displayName="HighlightMatch"},54914(e,l,t){t.d(l,{Z:()=>m,q:()=>h});var s=t(74848),r=t(70170),i=t(73702),a=t(90797),n=t(70730),o=t(24043),u=t(38621),c=t(94709),d=t(96540),f=t(34164);let m=({ref:e,ariaActiveDescendant:l,ariaControls:t,ariaExpanded:n,ariaHasPopup:m,onBlur:_,onFocus:g,onKeyDown:x,onPreload:p,onSearch:v,query:R,sx:b,className:E})=>{let{sendRepoClickEvent:F}=(0,a.T)(),[y,L]=d.useState(R),C=(0,o.G7)("file_finder_skip_debounce"),N=d.useRef((0,r.s)(e=>v(e),250));d.useEffect(()=>{L(R)},[R]);let j=R?(0,s.jsx)(c.ks.Action,{onClick:()=>{F("FILE_TREE.CANCEL_SEARCH"),v("")},icon:u.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,s.jsx)(c.ks,{autoFocus:h(),ref:e,value:y,onKeyDown:x,onChange:e=>{L(e.target.value),p(),C?v(e.target.value):N.current(e.target.value)},sx:b,className:(0,f.$)("d-flex",E),"aria-label":"Go to file","aria-activedescendant":l,role:m?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":m?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:"Go to file",leadingVisual:u.SearchIcon,trailingAction:j,trailingVisual:j?void 0:()=>(0,s.jsx)(i.E,{children:(0,s.jsx)("kbd",{children:"t"})}),onFocus:e=>{p(),e.target.select(),g?.(e)},onBlur:_,onClick:()=>F("FILE_TREE.SEARCH_BOX")})};function h(){return"1"===new URLSearchParams(n.fV.search).get("search")}m.displayName="FilesSearchBox",m.displayName="FilesSearchBox"}}]);
//# sourceMappingURL=43142-60af73dbb047bb6a-b8e2181f30820e5e.js.map